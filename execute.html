<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--

  $Id$

  This file is part of the OpenLink Ajax Toolkit (OAT) project

  Copyright (C) 2009 OpenLink Software

  This project is free software; you can redistribute it and/or modify it
  under the terms of the GNU General Public License as published by the
  Free Software Foundation; only version 2 of the License, dated June 1991

  This project is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software Foundation,
  Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA

-->
<head>

  <script type="text/javascript">
var featureList=["ajax","json","dimmer","grid","anchor","resize","xml","tab","sparql","rdfstore","rdfmini","map","ghostdrag"];

function init() {

  OAT.Dom.hide("result");
  OAT.Event.attach("throbber","click",OAT.AJAX.cancelAll);
  OAT.Preferences.imagePath = "/isparql/toolkit/images/";

  var qe = new QueryExec({div:"result"});
  OAT.MSG.attach(qe, "iSPARQL_QE_DONE", function (m,s,l) { iSPARQL.StatusUI.hide(); OAT.Dom.show("result") });

  iSPARQL.Defaults.init();
  iSPARQL.StatusUI.init();

  var opts = OAT.Dom.uriParams();

  if ("file" in opts) {
    var f = $("file");
    f.appendChild(OAT.Dom.text("Stored query: "));

    var a = OAT.Dom.create("a");
    a.innerHTML = opts.file;
    a.href = opts.file;
    f.appendChild(a);
  }



  var lc = [];

  if (qe.detectLocationMacros(iSPARQL.Defaults.query)) {
    iSPARQL.StatusUI.statMsg ("Initializing geolocation service &#8230;");

    if (!iSPARQL.locationCache) {
      if (!!localStorage && !!localStorage.iSPARQL_locationCache)
	lc = localStorage.iSPARQL_locationCache;
	iSPARQL.locationCache = new iSPARQL.LocationCache (10, lc, true);
      }
      var locUI = new iSPARQL.locationAcquireUI ({useCB: qe.executeWithLocation, 
                                              cancelCB: false,
					      cbParm: iSPARQL.Defaults,
					      cache: iSPARQL.locationCache});
      locUI.refresh();
  } else {
    qe.execute(iSPARQL.Defaults);
  }   
}
  </script>

  <script type="text/javascript" src="defaults.js"></script>
  <script type="text/javascript" src="statusui.js"></script>
  <script type="text/javascript" src="error.js"></script>
  <script type="text/javascript" src="execute.js"></script>
  <script type="text/javascript" src="location.js"></script>
  <script type="text/javascript" src="/isparql/toolkit/loader.js"></script>

  <meta name="viewport" content="width = device-width"/>

  <link rel="apple-touch-icon" href="/isparql/images/mob_home_icon.png"/>

  <link type="text/css" rel="stylesheet" href="/isparql/styles/execute.css"/>
  <link type="text/css" rel="stylesheet" href="/isparql/styles/dialog.css"/>
  <link type="text/css" rel="stylesheet" href="/isparql/toolkit/styles/winrect.css"/>
  <link media="only screen and (max-device-width: 480px)" 
        type="text/css" 
	rel="stylesheet" 
	href="/isparql/styles/mobile.css"/>
  <title>iSPARQL Query Execution</title>
</head>

<body>
  <div id="file"></div>
  <div id="splash">
    <div id="splash_inner">
      <div id="splash_hd">
        <img src="images/openlinklogo_wstrap_2008_no_motto.png" alt="OpenLink Software"/>
      </div>
      <div class="msg" id="statMsgMain">iSPARQL Initialization</div>
      <div class="msg" id="statMsgElem">Loading</div>
	
      <img src="/isparql/toolkit/images/throbber.gif" id="splashThrobber" style="display:none"/>

      <noscript>
        <img src="/isparql/images/stop_32.png" alt="error"/>
        <div class="error statMsgError">
          iSPARQL cannot work without JavaScript<br/>
	  Either your browser has no JavaScript, or it is currently disabled.
    </div>
      </noscript>

      <img src="/isparql/images/stop_32.png" alt="error" id="splashErrorImg" style="display:none"/>
      <div class="error" id="statMsgErr"></div>
      <div id="splash_ver"></div>
      <div id="splash_copyr">Copyright &copy; 2010 OpenLink Software</div>
      <div id="splash_foot" class="opl_motto">Making Technology Work For You &trade;</div>
    </div> <!-- #splash_inner -->
  </div> <!-- #splash -->

  <div id="locAcquireUI" style="display:none">
    <div id="locAcquireUI_inner">
      <div id="locAcquireMsg">
        <h3>Acquiring location <img id="locAcquireThrobber" src="/isparql/toolkit/images/throbber.gif"/></h3>
        <table id="locAcquireCurrent">
          <tr><th>Latitude</th><td id="locAcquireLatCtr">N/A</td></tr>
          <tr><th>Longitude</th><td id="locAcquireLonCtr">N/A</td></tr>
          <tr><th>Accuracy</th><td id="locAcquireAccCtr">N/A</td></tr>
        </table>
      </div>
      <div id="locAcquireErrMsg"></div>
      <div id="locAcquireBtnCtr">
        <button id="locAcquireUseBtn">Use</button>
        <button id="locAcquireRefreshBtn">Refresh</button>
        <button id="locAcquireCancelBtn">Cancel</button>
      </div>
    </div> 
  </div> <!-- locAcquireUI -->
  <div id="result">
  </div>
  <p class="copyright">
    Dynamic <a href="http://dbpedia.org/resource/linkeddata">Linked Data Page</a><br/>
    <a href="http://www.openlinksw.com/virtuoso">
      <img border="0" src="/isparql/images/virt_power_no_border.png" alt="Powered by OpenLink Virtuoso Universal Server"/>
    </a>
  </p>
</body>
</html>
