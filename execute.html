<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--

  $Id$

  This file is part of the OpenLink Ajax Toolkit (OAT) project

  Copyright (C) 2009 OpenLink Software

  This project is free software; you can redistribute it and/or modify it
  under the terms of the GNU General Public License as published by the
  Free Software Foundation; only version 2 of the License, dated June 1991

  This project is distributed in the hope that it will be useful, but
  WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with this program; if not, write to the Free Software Foundation,
  Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA

-->
<head>

  <script type="text/javascript">
window.YMAPPID = 'yahoo-id';
var featureList=["ajax","json","dimmer","grid","anchor","resize","xml","tab","sparql","rdfstore","rdfmini","map","ghostdrag"];
function init() {
  var startRef = function() {
    OAT.Dom.show("throbber");
    OAT.Dom.hide("result");
  }

  var endRef = function() {
    OAT.Dom.hide("throbber");
    OAT.Dom.show("result");
  }

  OAT.Event.attach("throbber","click",OAT.AJAX.cancelAll);
  OAT.Preferences.imagePath = "/isparql/toolkit/images/";

  var qe = new QueryExec({div:"result"});

  iSPARQL.Defaults.init();

  var opts = OAT.Dom.uriParams();

  if ("file" in opts) {
    var f = $("file");
    f.appendChild(OAT.Dom.text("Stored query: "));

    var a = OAT.Dom.create("a");
    a.innerHTML = opts.file;
    a.href = opts.file;
    f.appendChild(a);
  }

  OAT.Dom.hide("throbber");

  iSPARQL.locationCache = new iSPARQL.LocationCache (10, [], true);

  if (qe.detectLocationMacros(iSPARQL.Defaults.query)) {
    var loc = new iSPARQL.locationAcquireUI ({useCB: qe.executeWithLocation, 
                                              cancelCB: false,
					      cbParm: iSPARQL.Defaults,
					      cache: iSPARQL.locationCache});
  } else {
    qe.execute(iSPARQL.Defaults);
  }   
}
  </script>

  <script type="text/javascript" src="defaults.js"></script>
  <script type="text/javascript" src="statusui.js"></script>
  <script type="text/javascript" src="error.js"></script>
  <script type="text/javascript" src="execute.js"></script>
  <script type="text/javascript" src="location.js"></script>
  <script type="text/javascript" src="/isparql/toolkit/loader.js"></script>

  <meta name="viewport" content="width = device-width"/>

  <link rel="apple-touch-icon" href="/isparql/images/mob_home_icon.png"/>

  <link type="text/css" rel="stylesheet" href="/isparql/styles/execute.css"/>
  <link type="text/css" rel="stylesheet" href="/isparql/styles/dialog.css"/>
  <link type="text/css" rel="stylesheet" href="/isparql/toolkit/styles/winrect.css"/>
  <link media="only screen and (max-device-width: 480px)" 
        type="text/css" 
	rel="stylesheet" 
	href="/isparql/styles/mobile.css"/>
  <title>iSPARQL Query Execution</title>
</head>

<body>
  <div id="file"></div><p></p>
  <div id="throbber" style="text-align: center;">
    <div id="expln">
      <img style="margin: auto; cursor:pointer;" src="/isparql/toolkit/images/throbber.gif" />
    </div>
  </div> <!-- throbber -->

  <div id="locAcquireUI" style="display:none">
    <div id="locAcquireUI_inner">
      <div id="locAcquireMsg">
        <h3>Acquiring location <img id="locAcquireThrobber" src="/isparql/toolkit/images/throbber.gif"/></h3>
        <table id="locAcquireCurrent">
          <tr><th>Latitude</th><td id="locAcquireLatCtr">N/A</td></tr>
          <tr><th>Longitude</th><td id="locAcquireLonCtr">N/A</td></tr>
          <tr><th>Accuracy</th><td id="locAcquireAccCtr">N/A</td></tr>
        </table>
      </div>
      <div id="locAcquireErrMsg"></div>
      <div id="locAcquireBtnCtr">
        <button id="locAcquireUseBtn">Use</button>
        <button id="locAcquireRefreshBtn">Refresh</button>
        <button id="locAcquireCancelBtn">Cancel</button>
      </div>
    </div> 
  </div> <!-- locAcquireUI -->
  <div id="result">
  </div>
  <p class="copyright">
    Dynamic <a href="http://dbpedia.org/resource/linkeddata">Linked Data Page</a><br/>
    <a href="http://www.openlinksw.com/virtuoso">
      <img border="0" src="/isparql/images/virt_power_no_border.png" alt="Powered by OpenLink Virtuoso Universal Server"/>
    </a>
  </p>
</body>
</html>
